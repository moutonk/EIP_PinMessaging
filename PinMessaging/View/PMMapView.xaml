<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:maps="clr-namespace:Microsoft.Phone.Maps.Controls;assembly=Microsoft.Phone.Maps"
    x:Class="PinMessaging.View.PMMapView"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d">

    <!--LayoutRoot est la grille racine où tout le contenu de la page est placé-->
    <Canvas x:Name="CentralCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Height="{StaticResource MapGridHeight}" Background="Black" ManipulationStarted="canvas_ManipulationStarted" ManipulationDelta="canvas_ManipulationDelta" ManipulationCompleted="canvas_ManipulationCompleted">

        <Canvas.Resources>
            <Storyboard x:Name="moveAnimation">
                <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(Canvas.Left)" Storyboard.TargetName="LayoutRoot" d:IsOptimized="True" />
            </Storyboard>
        </Canvas.Resources>

        <Canvas  x:Name="LayoutRoot" Width="{StaticResource LayoutRootWidth}"  VerticalAlignment="Stretch" Background="{StaticResource PMGrey}" Canvas.Left="{StaticResource LayoutRootLeftMargin}" Height="{StaticResource MapGridHeight}">
            
            <Grid Name="LeftMenuGrid" Width="{StaticResource AdditionalMapMenuWidth}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
            
                <Grid.RowDefinitions>
                    <RowDefinition Height="{StaticResource MapMenuHeight}"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" TextWrapping="Wrap" Text="{Binding Path=LocalizedResources.LeftMenuTitle, Source={StaticResource LocalizedStrings}}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="32"/>
                
                <ScrollViewer HorizontalAlignment="Stretch"  Grid.Row="1" VerticalAlignment="Top">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                            <RowDefinition Height="{StaticResource MapMenuHeight}"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="{StaticResource MapMenuHeight}"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        
                        <Image  Name="ImgMap"  Grid.Column="0" Grid.Row="0" Tap="ButtonMap_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonMap" Grid.Column="1" Grid.Row="0" Click="ButtonMap_OnClick" Content="{Binding Path=LocalizedResources.MenuMap, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgProfil"  Grid.Column="0" Grid.Row="1" Tap="ButtonProfil_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonProfil" Grid.Column="1" Grid.Row="1" Click="ButtonProfil_OnClick" Content="{Binding Path=LocalizedResources.MenuProfil, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgPins"  Grid.Column="0" Grid.Row="2" Tap="ButtonPins_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonPins" Grid.Column="1" Grid.Row="2" Click="ButtonPins_OnClick" Content="{Binding Path=LocalizedResources.MenuPins, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgFilters" Grid.Column="0" Grid.Row="3" Tap="ButtonFilters_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonFilters" Grid.Column="1" Grid.Row="3" Click="ButtonFilters_OnClick" Content="{Binding Path=LocalizedResources.MenuFilters, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgSettings"  Grid.Column="0" Grid.Row="4" Tap="ButtonSettings_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonSettings" Grid.Column="1" Grid.Row="4" Click="ButtonSettings_OnClick" Content="{Binding Path=LocalizedResources.MenuSettings, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgReward"  Grid.Column="0" Grid.Row="5" Tap="ButtonReward_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonReward" Grid.Column="1" Grid.Row="5" Click="ButtonReward_OnClick" Content="{Binding Path=LocalizedResources.MenurRewards, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgAbout"  Grid.Column="0" Grid.Row="6" Tap="ButtonAbout_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonAbout" Grid.Column="1" Grid.Row="6" Click="ButtonAbout_OnClick" Content="{Binding Path=LocalizedResources.MenuAbout, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
                        <Image  Name="ImgLogout"  Grid.Column="0" Grid.Row="7" Tap="ButtonLogout_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
                        <Button Name="ButtonLogout" Grid.Column="1" Grid.Row="7" Click="ButtonLogout_OnClick" Content="{Binding Path=LocalizedResources.MenuLogout, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>

                    </Grid>
                </ScrollViewer>
         
            </Grid>

            <Border Name="RightMenuGrid" Width="{StaticResource AdditionalMapMenuWidth}" Canvas.Left="{StaticResource RightMenuGridLeftMargin}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Height="{Binding ActualHeight, ElementName=LayoutRoot}"/>

            <Grid Name="MainVerticalGrid" Canvas.Left="{StaticResource AdditionalMapMenuWidth}"  Height="{StaticResource MainVerticalGridHeight}" Width="{StaticResource MainVerticalGridWidth}" >
            
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="{StaticResource MapGridLength}"></RowDefinition>
                </Grid.RowDefinitions>

                <Grid.Resources>
                    <Storyboard x:Name="MoveAnimationUp">
                        <DoubleAnimation Duration="0:0:0.2" 
                                             To="1000" 
                                             Storyboard.TargetProperty="(Grid.Height)"
                                             Storyboard.TargetName="MainVerticalGrid" 
                                             d:IsOptimized="True"
                                            Completed="Timeline_OnCompletedUp"/>
                    </Storyboard>
                    <Storyboard x:Name="MoveAnimationDown">
                        <DoubleAnimation Duration="0:0:0.2" 
                                             To="1600"
                                             Storyboard.TargetProperty="(Grid.Height)"
                                             Storyboard.TargetName="MainVerticalGrid" 
                                             d:IsOptimized="True"
                                         Completed="Timeline_OnCompletedDown"/>
                    </Storyboard>
                </Grid.Resources>

                <Grid x:Name="MainGridMap" Grid.Row="0">
         
                    <Grid.RowDefinitions>
                        <RowDefinition Height="76"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="90"/>
                    </Grid.RowDefinitions>
                    
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <Button Content="add" Click="Button_Click" />
                        <Button Content="rm" Click="Button_Click_1"/>
                        <Button Content="ZoomIn" Click="Button_Click_3" Width="146"/>
                        <Button Content="ZoomOut" Click="Button_Click_4" Width="152"/>
                    </StackPanel>

                    <Grid Grid.Row="1" x:Name="GridMap" >
                        <maps:Map x:Name="Map" Tap="Map_OnTouch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ZoomLevel="16" LandmarksEnabled="true" PedestrianFeaturesEnabled="true"/>
                        <Button Click="Center_Click" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="73" Width="73" BorderThickness="0">
                            <Button.Background>
                                <ImageBrush ImageSource="\Images\Menu\target@2x.png" Stretch="UniformToFill"/>
                            </Button.Background>
                        </Button>
                    </Grid>

                    <Grid Grid.Row="2" Name="GridMapMenu" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="30"></RowDefinition>
                        </Grid.RowDefinitions>
                        
                        <Button Name="MenuButton" Grid.Column="0" Grid.Row="0" Click="OpenClose_Left" HorizontalAlignment="Center" VerticalAlignment="Top" BorderThickness="0" Height="65" Width="120" Grid.RowSpan="2">
                            <Button.Background>
                                <ImageBrush ImageSource="\Images\Menu\menu_icon_2@2x.png" Stretch="Uniform"/>
                            </Button.Background>
                        </Button>
                        <TextBlock Grid.Column="0" Grid.Row="1" Tap="OpenClose_Left" TextAlignment="Center" FontSize="15" Text="{Binding Path=LocalizedResources.Menu, Source={StaticResource LocalizedStrings}}"></TextBlock>

                        <Button Name="NotificationButton" Click="MenuDown_OnClick" Grid.Column="1" Grid.Row="0" BorderThickness="0" HorizontalAlignment="Stretch">
                            <Button.Background>
                                <ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
                            </Button.Background>
                        </Button>
                        <TextBlock Grid.Column="1" Grid.Row="1" Tap="MenuDown_OnClick" TextAlignment="Center" FontSize="15" Text="{Binding Path=LocalizedResources.Notifications, Source={StaticResource LocalizedStrings}}"></TextBlock>

                        <Button Name="ContactsButton" Grid.Column="2" Grid.Row="0" Click="MenuDown_OnClick" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0">
                            <Button.Background>
                                <ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
                            </Button.Background>
                        </Button>
                        <TextBlock Grid.Column="2" Grid.Row="1" Tap="MenuDown_OnClick" TextAlignment="Center" FontSize="15" Text="{Binding Path=LocalizedResources.Contacts, Source={StaticResource LocalizedStrings}}"></TextBlock>

                        <Button Name="PinsButton" Grid.Column="3" Grid.Row="0" Click="OpenClose_Right" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0">
                            <Button.Background>
                                <ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
                            </Button.Background>
                        </Button>
                        <TextBlock Grid.Column="3" Grid.Row="1" Tap="OpenClose_Right" TextAlignment="Center" FontSize="15" Text="{Binding Path=LocalizedResources.Pins, Source={StaticResource LocalizedStrings}}"></TextBlock>
                    </Grid>
                
                </Grid>

                <Grid Grid.Row="1" Name="UnderMenuGrid" Background="{StaticResource PMGrey}"/>
                
            </Grid>
            
        </Canvas>
    </Canvas>






</phone:PhoneApplicationPage>