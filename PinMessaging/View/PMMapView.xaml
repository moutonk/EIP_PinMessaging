<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:maps="clr-namespace:Microsoft.Phone.Maps.Controls;assembly=Microsoft.Phone.Maps"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    x:Class="PinMessaging.View.PMMapView"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    x:Name="this">

    <!--LayoutRoot est la grille racine où tout le contenu de la page est placé-->
	<Canvas x:Name="CentralCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Black" ManipulationStarted="canvas_ManipulationStarted" ManipulationDelta="canvas_ManipulationDelta" ManipulationCompleted="canvas_ManipulationCompleted">

		<Canvas.Resources>
			<Storyboard x:Name="moveAnimation">
				<DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(Canvas.Left)" Storyboard.TargetName="LayoutRoot" d:IsOptimized="True" />
			</Storyboard>
		</Canvas.Resources>

		<Canvas.Height>
			<StaticResource ResourceKey="MapGridHeight"/>
		</Canvas.Height>

		<Canvas  x:Name="LayoutRoot" Width="{StaticResource LayoutRootWidth}"  VerticalAlignment="Stretch" Background="{StaticResource PMGrey}" Canvas.Left="{StaticResource LayoutRootLeftMargin}" Height="{StaticResource MapGridHeight}">

			<Grid x:Name="LeftMenuGrid" Width="{StaticResource AdditionalMapMenuWidth}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >

				<Grid.RowDefinitions>
					<RowDefinition Height="{StaticResource MapMenuHeight}"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0" TextWrapping="Wrap" Text="{Binding LocalizedResources.LeftMenuTitle, Source={StaticResource LocalizedStrings}}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="32"/>

				<ScrollViewer HorizontalAlignment="Stretch"  Grid.Row="1" VerticalAlignment="Top">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
							<RowDefinition Height="{StaticResource MapMenuHeight}"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource MapMenuHeight}"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Image  x:Name="ImgMap"  Grid.Column="0" Grid.Row="0" Tap="ButtonMap_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonMap" Grid.Column="1" Grid.Row="0" Click="ButtonMap_OnClick" Content="{Binding LocalizedResources.MenuMap, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgProfil"  Grid.Column="0" Grid.Row="1" Tap="ButtonProfil_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonProfil" Grid.Column="1" Grid.Row="1" Click="ButtonProfil_OnClick" Content="{Binding LocalizedResources.MenuProfil, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgPins"  Grid.Column="0" Grid.Row="2" Tap="ButtonPins_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonPins" Grid.Column="1" Grid.Row="2" Click="ButtonPins_OnClick" Content="{Binding LocalizedResources.MenuPins, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgFilters" Grid.Column="0" Grid.Row="3" Tap="ButtonFilters_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonFilters" Grid.Column="1" Grid.Row="3" Click="ButtonFilters_OnClick" Content="{Binding LocalizedResources.MenuFilters, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgSettings"  Grid.Column="0" Grid.Row="4" Tap="ButtonSettings_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonSettings" Grid.Column="1" Grid.Row="4" Click="ButtonSettings_OnClick" Content="{Binding LocalizedResources.MenuSettings, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgReward"  Grid.Column="0" Grid.Row="5" Tap="ButtonReward_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonReward" Grid.Column="1" Grid.Row="5" Click="ButtonReward_OnClick" Content="{Binding LocalizedResources.MenurRewards, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgAbout"  Grid.Column="0" Grid.Row="6" Tap="ButtonAbout_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonAbout" Grid.Column="1" Grid.Row="6" Click="ButtonAbout_OnClick" Content="{Binding LocalizedResources.MenuAbout, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>
						<Image  x:Name="ImgLogout"  Grid.Column="0" Grid.Row="7" Tap="ButtonLogout_OnClick" HorizontalAlignment="Left" VerticalAlignment="Top" Source="\Images\Flags\FR.png"/>
						<Button x:Name="ButtonLogout" Grid.Column="1" Grid.Row="7" Click="ButtonLogout_OnClick" Content="{Binding LocalizedResources.MenuLogout, Source={StaticResource LocalizedStrings}}" HorizontalContentAlignment="Stretch" BorderThickness="0" FontSize="32"/>

					</Grid>
				</ScrollViewer>

			</Grid>

			<Grid x:Name="RightMenuGrid" Width="{StaticResource AdditionalMapMenuWidth}" Canvas.Left="{StaticResource RightMenuGridLeftMargin}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Height="{Binding ActualHeight, ElementName=LayoutRoot}">
				<Grid.RowDefinitions>
					<RowDefinition Height="{StaticResource MapMenuHeight}"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<TextBlock Grid.Row="0" TextWrapping="Wrap" Text="{Binding LocalizedResources.Pins, Source={StaticResource LocalizedStrings}}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="32"/>
				<phone:Pivot Grid.Row="1" Height="724" HorizontalAlignment="Left" Margin="0,0,0,0" x:Name="pivot" Title="" VerticalAlignment="Top" Width="420" FontSize="20">
		
                    <phone:Pivot.HeaderTemplate>
						<DataTemplate>
							<TextBlock FontSize="35" Text="{Binding}"/>
							<!--<Image Source="/Images/Flags/FR.png"/>-->
						</DataTemplate>
					</phone:Pivot.HeaderTemplate>
					
                    <phone:PivotItem Header="Nouveau Pin" Margin="0,24,-244,-390" Background="{StaticResource PMGrey}" RenderTransformOrigin="0.494,0.707">
                        <StackPanel Orientation="Vertical">
                            <toolkit:ListPicker x:Name="ListPickerPinType" SelectionChanged="ListPickerPinType_OnSelectionChanged" ExpansionMode="FullScreenOnly" ItemsSource="{Binding ListPickerPins, ElementName=this}" HorizontalAlignment="Left" Margin="20,0,0,0" VerticalAlignment="Top" Width="380" Height="115" RenderTransformOrigin="0.496,0.766" BorderThickness="0">
                                <toolkit:ListPicker.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image Source="{Binding ImgPath}" Width="70" Height="70"/>
                                            <TextBlock Margin="20 15 0 0" Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:ListPicker.ItemTemplate>
                                <toolkit:ListPicker.FullModeItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image Source="{Binding ImgPath}" Margin="0 5 0 0" Width="100" Height="100"/>
                                            <TextBlock Margin="20 35 0 0" Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:ListPicker.FullModeItemTemplate>
                            </toolkit:ListPicker>
                            <TextBox x:Name="PinReceiver" AcceptsReturn="False" MaxLength="20" TextWrapping="Wrap" Background="{StaticResource PhoneContrastBackgroundBrush}" Text="Receiver" Height="0" BorderThickness="0" Foreground="Black" Margin="10,0,0,0"/>
                            <TextBox x:Name="PinTitle" AcceptsReturn="False" MaxLength="20" TextWrapping="Wrap" Margin="10,0,0,0" Background="{StaticResource PhoneContrastBackgroundBrush}" Text="Title" Height="71" BorderThickness="0">
                                <TextBox.Foreground>
                                    <SolidColorBrush Color="Black"></SolidColorBrush>
                                </TextBox.Foreground>
                            </TextBox>
                            <TextBox x:Name="PinContent" MaxWidth="400" Height="212" TextWrapping="Wrap" Text="TextBoxsdqsdqsdqsdqsdsqdqsd" Margin="10,0,0,0" Background="{StaticResource PhoneContrastBackgroundBrush}" AcceptsReturn="True" BorderThickness="0">
                            	<TextBox.Foreground>
                                    <SolidColorBrush Color="Black"></SolidColorBrush>
                                </TextBox.Foreground>
                            </TextBox>
                            <Image x:Name="PinImage" Height="142" Margin="20,0,0,0" HorizontalAlignment="Left" Width="380"/>
                            <Button x:Name="PostPinButton" Content="Déposer le Pin" Background="{StaticResource PMOrange}" BorderThickness="0" Margin="10,0,0,0" Height="102"/>
                            <TextBlock TextWrapping="Wrap" Text="TextBlock"/>
                        </StackPanel>
                   
                    </phone:PivotItem>
					
                    <phone:PivotItem Header="Favoris" Margin="0,28,-137,0" Background="{StaticResource PMGreen}">
						<Grid>
							<Image Height="150" HorizontalAlignment="Left" Margin="103,101,0,0" x:Name="image2" Stretch="Fill" VerticalAlignment="Top" Width="200" Source="Thumbnails/2.jpeg" />
						</Grid>
					</phone:PivotItem>
					
                    <phone:PivotItem Header="Mes Pins" Margin="0,28,-137,0" Background="{StaticResource PMYellow}">
						<Grid>
							<Image Height="150" HorizontalAlignment="Left" Margin="103,101,0,0" x:Name="image3" Stretch="Fill" VerticalAlignment="Top" Width="200" Source="Thumbnails/3.jpeg"/>
						</Grid>
					</phone:PivotItem>
				</phone:Pivot>

			</Grid>

			<Grid x:Name="MainVerticalGrid" >

				<Grid.Resources>
					<Storyboard x:Name="MoveAnimationUp">
						<DoubleAnimation Duration="0:0:0.2" 
							To="1000" 
							Storyboard.TargetProperty="(Grid.Height)"
							Storyboard.TargetName="MainVerticalGrid" 
							d:IsOptimized="True"
                                            />
					</Storyboard>
					<Storyboard x:Name="MoveAnimationDown">
						<DoubleAnimation Duration="0:0:0.2" 
							To="1600"
							Storyboard.TargetProperty="(Grid.Height)"
							Storyboard.TargetName="MainVerticalGrid" 
							d:IsOptimized="True"
                                         />
					</Storyboard>
				</Grid.Resources>

				<Canvas.Left>
					<StaticResource ResourceKey="AdditionalMapMenuWidth"/>
				</Canvas.Left>
				<Grid.Height>
					<StaticResource ResourceKey="MainVerticalGridHeight"/>
				</Grid.Height>
				<Grid.Width>
					<StaticResource ResourceKey="MainVerticalGridWidth"/>
				</Grid.Width>

				<Grid.RowDefinitions>
					<RowDefinition Height="*"/>
					<RowDefinition Height="{StaticResource MapGridLength}"/>
				</Grid.RowDefinitions>

				<Grid x:Name="MainGridMap" Grid.Row="0">

					<Grid.RowDefinitions>
						<RowDefinition Height="0"/>
						<RowDefinition Height="*"/>
						<RowDefinition Height="90"/>
					</Grid.RowDefinitions>

					<StackPanel Grid.Row="0" Orientation="Horizontal">
						<Button Content="add" Click="Button_Click" />
						<Button Content="rm" Click="Button_Click_1"/>
						<Button Content="ZoomIn" Click="Button_Click_3" Width="146"/>
						<Button Content="ZoomOut" Click="Button_Click_4" Width="152"/>
					</StackPanel>

					<Grid Grid.Row="1" x:Name="GridMap" >
						<maps:Map x:Name="Map" Pitch="45" Tap="Map_OnTouch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ZoomLevel="16" LandmarksEnabled="true" PedestrianFeaturesEnabled="true"/>
						<Button Click="Center_Click" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="73" Width="73" BorderThickness="0">
							<Button.Background>
								<ImageBrush ImageSource="\Images\Menu\target@2x.png" Stretch="UniformToFill"/>
							</Button.Background>
						</Button>
					</Grid>

					<Grid Grid.Row="2" x:Name="GridMapMenu" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="*"/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>

						<Button x:Name="MenuButton" Grid.Column="0" Grid.Row="0" Click="OpenClose_Left" HorizontalAlignment="Center" VerticalAlignment="Top" BorderThickness="0" Height="65" Width="120" Grid.RowSpan="2">
							<Button.Background>
								<ImageBrush ImageSource="\Images\Menu\menu_icon_2@2x.png" Stretch="Uniform"/>
							</Button.Background>
						</Button>
						<TextBlock Grid.Column="0" Grid.Row="1" Tap="OpenClose_Left" TextAlignment="Center" FontSize="15" Text="{Binding LocalizedResources.Menu, Source={StaticResource LocalizedStrings}}"/>

						<Button x:Name="NotificationButton" Click="MenuDown_OnClick" Grid.Column="1" Grid.Row="0" BorderThickness="0" HorizontalAlignment="Stretch">
							<Button.Background>
								<ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
							</Button.Background>
						</Button>
						<TextBlock Grid.Column="1" Grid.Row="1" Tap="MenuDown_OnClick" TextAlignment="Center" FontSize="15" Text="{Binding LocalizedResources.Notifications, Source={StaticResource LocalizedStrings}}"/>

						<Button x:Name="ContactsButton" Grid.Column="2" Grid.Row="0" Click="MenuDown_OnClick" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0">
							<Button.Background>
								<ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
							</Button.Background>
						</Button>
						<TextBlock Grid.Column="2" Grid.Row="1" Tap="MenuDown_OnClick" TextAlignment="Center" FontSize="15" Text="{Binding LocalizedResources.Contacts, Source={StaticResource LocalizedStrings}}"/>

						<Button x:Name="PinsButton" Grid.Column="3" Grid.Row="0" Click="OpenClose_Right" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0">
							<Button.Background>
								<ImageBrush ImageSource="\Images\Menu\mini_orange_star@2x.png" Stretch="Uniform"/>
							</Button.Background>
						</Button>
						<TextBlock Grid.Column="3" Grid.Row="1" Tap="OpenClose_Right" TextAlignment="Center" FontSize="15" Text="{Binding LocalizedResources.Pins, Source={StaticResource LocalizedStrings}}"/>
					</Grid>

				</Grid>

				<Grid Grid.Row="1" x:Name="UnderMenuGrid" Background="{StaticResource PMGrey}">
					<Grid Background="{StaticResource PMOrange}" HorizontalAlignment="Left" Height="74" VerticalAlignment="Top" Width="480">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="60"/>
						</Grid.ColumnDefinitions>

						<TextBlock x:Name="DownMenuTitle" FontSize="32" FontWeight="Bold" Foreground="White" HorizontalAlignment="Left" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="405" Height="41" Margin="10,0,0,0"/>

						<Button x:Name="CloseMenuDownButton" Content="X" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Height="64" Width="60" BorderThickness="0" Click="CloseMenuDownButton_Click"/>
					</Grid>

				</Grid>

			</Grid>

		</Canvas>
	</Canvas>






</phone:PhoneApplicationPage>